---
author: priority
title: vue3 ç»„ä»¶åº“çš„è´¡çŒ®
date: 2022-08-08
desc: Vue3 ç»„ä»¶åº“,æ·»åŠ ä¸€è¡Œä»£ç ï¼Œæˆä¸ºäº†å¤§å‹å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…
language: CN
---

<!-- ![coding.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/995a979d7470447d8b5719c739d25a6f~tplv-k3u1fbpfcp-watermark.image?) -->

â˜ èœé¸¡æ—¥å¿—ğŸ‘¾

é¡¹ç›®åœ°å€ï¼š[naive-ui](https://github.com/TuSimple/naive-ui) 

å¼€å§‹ä¹‹å‰ï¼š
> åœ¨å†™ç½‘é¡µçš„æ—¶å€™éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹uiæ¡†æ¶ï¼Œé¡¹ç›®çš„æŠ€æœ¯æ ˆä¸ºVue3+tsï¼Œå› ä¸ºç§ç§åŸå› æˆ‘é€‰æ‹©äº†NaiveUI(ğŸ¤”ç°åœ¨NaiveUIçš„startæ•°å·²ç»æ˜¯9.9käº†)ã€‚

### é‡åˆ°çš„ç¬¬ä¸€ä¸ªbug
åœ¨å®é™…çš„ä½¿ç”¨å½“ä¸­ç”¨åˆ°äº†ä¸€ä¸ªcarousel(è½®æ’­å›¾)ç»„ä»¶ã€‚ç„¶åé‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œç»„ä»¶æ˜¯è‡ªå¸¦loop(å¾ªç¯æ’­æ”¾)çš„ï¼Œéœ€è¦åœ¨hoverçš„æ—¶å€™ï¼Œåœæ­¢è½®æ’­ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54abde32b97442638192b6976bac030e~tplv-k3u1fbpfcp-watermark.image?)

é‚£ä¹ˆåœ¨å®˜ç½‘çš„å®šä¹‰ä¸­æˆ‘çœ‹åˆ°ä¸€ä¸ª**autoplay**å±æ€§ï¼Œäºæ˜¯å¯ä»¥æƒ³å½“ç„¶çš„ç»‘å®š **@mouseenter @mouseleave** åŠ¨æ€çš„ä¿®æ”¹autoplayçš„å€¼ï¼Œä½†æ˜¯å¥½åƒå¹¶ä¸èƒ½å¤ŸåŠæ—¶çš„ç”Ÿæ•ˆï¼Œæ¯æ¬¡hoveræ—¶éƒ½éœ€è¦è½®æ’­è¿‡1è‡³2å¼ å›¾ç‰‡çš„æ—¶å€™æ‰ä¼šåœæ­¢ï¼Œç„¶åç–¯ç‹‚æœ¬åœ°debugä¹Ÿå¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œæ„Ÿè§‰åƒæ˜¯vueä¸€æ¬¡æ¸²æŸ“å‘¨æœŸæ²¡æœ‰åŠæ—¶åœ°ç›‘å¬åˆ°autoplayçš„æ”¹å˜ã€‚

#### æå‡ºé—®é¢˜
äºæ˜¯æˆ‘åœ¨naiveçš„issueæœç´¢ç›¸å…³çš„é—®é¢˜ä½†æ˜¯å¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„ç­”æ¡ˆã€‚ä¹‹åä¾¿åœ¨codesandboxå»å¤ç°æˆ‘çš„é—®é¢˜ï¼š[å¤ç°é“¾æ¥](https://codesandbox.io/s/crazy-bird-3ossou?file=/src/components/demo.vue)ï¼Œå‘ç°å½“æ—¶æœ€æ–°ç‰ˆæœ¬(2.30.0)çš„naive-uiä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ã€‚æˆ‘ä¾¿å»æå‡ºäº†ä¸€ä¸ªissueã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c14730f64c274c32831c00ae368a660f~tplv-k3u1fbpfcp-watermark.image?)

æœ‰æ„æ€çš„æ˜¯ï¼š
> åœ¨å½“æ—¶issueä¸‹ä¹Ÿæœ‰å…¶ä»–äººéœ€è¦åˆ°äº†ç›¸åŒçš„é—®é¢˜ï¼Œå¹¶ä¸”è¯¢é—®æˆ‘æ˜¯å¦è§£å†³äº†ï¼Œä¸è¿‡æˆ‘å¹¶æ²¡æœ‰ğŸ˜ è¢«è‡ªå·±èœå“­ ğŸ˜­ï¼Œåæ¥å› ä¸ºè¿™ä¸ªbugè¢«ä¿®å¤äº†æ‰€ä»¥å°±ç­‰ç€æ–°ç‰ˆæœ¬çš„ç„¶ååº”ç”¨äº†ğŸ˜‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3341956c99f94cd681154812248917bc~tplv-k3u1fbpfcp-watermark.image?)

è¿™ä¸ªé—®é¢˜å¾ˆå¿«è¢«å…¶ä»–å¤§ä½¬ä¿®å¤äº†ï¼ŒåŸç†å¤§è‡´å°±æ˜¯åœ¨ç»„ä»¶å†…éƒ¨ä¸Šå»ç»‘å®šäº†mouseenterå’Œmouseleaveï¼Œæ‰§è¡Œå»åˆ¤æ–­propsçš„autoplayçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¼€å¯autoplayã€‚



![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ed62a693a5e4e97bd18c0ea3d494bb6~tplv-k3u1fbpfcp-watermark.image?)
> å…·ä½“æ›´æ”¹autoplayçš„åŸç†å¤§å®¶å¯ä»¥è‡ªå·±ä¸‹è½½æºç çœ‹çœ‹ã€‚


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c9f3356498d469f846affa0b740ed82~tplv-k3u1fbpfcp-watermark.image?)

> è™½ç„¶è¿™æ¬¡é‡åˆ°çš„bugå¹¶æ²¡æœ‰è‡ªå·±å»è§£å†³ï¼Œä¸è¿‡è¿™ä¹Ÿä¿ƒä½¿äº†æˆ‘åé¢å»æäº¤prã€‚


### é‡åˆ°çš„ç¬¬äºŒä¸ªbug
åŒæ ·æ˜¯carousel(è½®æ’­å›¾)ç»„ä»¶ï¼Œåœ¨æˆ‘çš„é¡¹ç›®å½“ä¸­è½®æ’­å›¾å†…éƒ¨åªæœ‰ä¸¤ä¸ªitemåŒæ—¶æˆ‘éœ€è¦autoplayå’Œloop(è‡ªåŠ¨æ’­æ”¾å¹¶ä¸”å¾ªç¯)ï¼Œäºæ˜¯ä¾¿å‡ºç°äº†åˆ‡æ¢æ•ˆæœç›¸åçš„bugï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

![loop.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63ced1a454b54f0fa0ed5f65302c36a1~tplv-k3u1fbpfcp-watermark.image?)

#### å®šä½bug
åœ¨ä¸€å¼€å§‹æˆ‘åŒæ ·æ˜¯è§‰å¾—æˆ‘çš„é¡¹ç›®ä¸Šæ˜¯å› ä¸ºæœ‰ä»€ä¹ˆä¸œè¥¿å½±å“åˆ°äº†ç»„ä»¶ï¼Œäºæ˜¯å¼€å§‹æœ¬åœ°ç–¯ç‹‚debugï¼Œä½†æˆ‘è¿”ç°å½“ç»„ä»¶å†…éƒ¨æœ‰3ä¸ªitemæ—¶æ•ˆæœæ˜¯å®Œå…¨okçš„ï¼Œä½†æˆ‘è‡³æ­¤ä¹Ÿå§‹ç»ˆè¿˜æ²¡æœ‰æ€€ç–‘ç»„ä»¶å†…éƒ¨é—®é¢˜ï¼Œæˆ‘æ˜¯å¦‚æ­¤ç›¸ä¿¡ä½ ~

![twoitem.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5929b8eca8784ca3a68d3ce4ee82168e~tplv-k3u1fbpfcp-watermark.image?)

æˆ‘ç”šè‡³ä¹Ÿå› æ­¤æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®å¼•å…¥naive-uiå’Œåœ¨codesandboxåˆ†åˆ«å»å®éªŒï¼Œæˆ‘éƒ½å‘ç°åœ¨ç›¸åŒçš„æƒ…å†µä¸‹éƒ½æœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘ç¡®å®šäº†æ˜¯ç»„ä»¶å†…éƒ¨çš„é—®é¢˜ã€‚æœ‰äº†ä¸Šä¸€æ¬¡çš„ç»éªŒå†åŠ ä¸Šæˆ‘æ›´æƒ³å»è‡ªå·±è§£å†³é—®é¢˜(æƒ³æ°´ä¸€ä¸ªprğŸ¥º)äºæ˜¯ä¾¿åˆå»æäº†ä¸€ä¸ªissueï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/efbb26118f5645bd8bb75be1b5416edb~tplv-k3u1fbpfcp-watermark.image?)

ç„¶åä¾¿å»forkäº†ä»£ç ã€‚å®šä½åˆ°carouselç»„ä»¶å¼€å§‹æ‰¾bugã€‚

### è§£å†³é—®é¢˜
#### åˆ†æ

ä¸€å¼€å§‹æˆ‘ä¼šå»æ€è€ƒè¿™ä¸ªæ•ˆæœæ˜¯ä¸ºä»€ä¹ˆå¯¼è‡´çš„ï¼Œäºæ˜¯åœ¨æ§åˆ¶å°æŸ¥çœ‹domå…ƒç´ ï¼š


![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b61fe073dda4456b8fce6cd11627b10~tplv-k3u1fbpfcp-watermark.image?)

å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œè¿™æ˜¯naive-uiå®˜ç½‘ä¸Šçš„carouselï¼Œåœ¨é¡µé¢ä¸Šæˆ‘ä»¬æ˜¯æœ‰4ä¸ªitemï¼Œä½†æ˜¯åœ¨domå…ƒç´ ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–æ˜¯æœ‰6ä¸ªè¿™æ ·çš„èŠ‚ç‚¹ã€‚ **(å®é™…ä¸Šçš„domçš„å®šä½æ˜¯æˆ‘åœ¨æœ¬åœ°ä¸¤ä¸ªitemä¸‹çœ‹åˆ°äº†å››ä¸ªdomèŠ‚ç‚¹)** è¿™æ ·åšçš„ç›®çš„å°±æ˜¯ä¸ºäº†ä»ç¬¬ä¸€ä¸ªåˆ‡æ¢åˆ°æœ€åä¸€ä¸ª å’Œ ä»æœ€åä¸€ä¸ªåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ª çš„è¿‡æ¸¡ä¸ä¼šç›´æ¥ä»ä¸­é—´è¿‡æ¸¡è¿‡å»ï¼Œè¿™ä¼šæœ‰ä¸€ä¸ªé¡µé¢é—ªçƒçš„é—®é¢˜ã€‚

ç„¶åä¹Ÿå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°æ¯æ¬¡çš„åˆ‡æ¢éƒ½æ˜¯translateåšçš„åˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™æ ·ä¾¿å¤§æ¦‚çŸ¥é“æ˜¯æ€ä¹ˆå®ç°å¾—äº†ã€‚ 

#### æºç è§£è¯»

åœ¨å¼€å§‹æºç çš„æ—¶å€™ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼š
> åœ¨æ¯ä¸ªå¼€æºé¡¹ç›®çš„READMEå½“ä¸­éƒ½æœ‰ **contributing** , è¯·è®°å¾—åœ¨æäº¤prä¹‹å‰ä»”ç»†é˜…è¯»ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c46aafafa80749af897b0e898bca4cc6~tplv-k3u1fbpfcp-watermark.image?)


æºç çš„é˜…è¯»æ˜¯ä¸€ä»¶æŒºéº»çƒ¦çš„äº‹ï¼Œå½“æˆ‘æ‰“å¼€carouselæ–‡ä»¶çš„ä»£ç æ—¶å‘ç°ä¸€ä¸ªæ–‡ä»¶æœ‰ä¸€åƒè¡Œä»£ç ï¼Œè™½ç„¶å¬ç€ä¸æ˜¯å¾ˆå¤šï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªå…¨æ˜¯é€»è¾‘çš„ä»£ç æœ‰1000è¡Œï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯å¾ˆå¤´å¤§çš„ï¼Œæ‰€ä»¥è¿™å¹¶ä¸å¯èƒ½ä¸€è¡Œä¸€è¡Œå»è§£è¯»ã€‚(**å…¶å®ä¸»è¦æ˜¯æˆ‘å¤ªèœäº†ğŸ˜­**) 

è¿™ä¸ªæ—¶å€™å°±æ˜¯æŒ‰ç…§æˆ‘çš„æ€è·¯ctrl+F å¤§è‡´çš„çœ‹çœ‹å’¯ï¼Œå› ä¸ºåœ¨å…ˆå‰æˆ‘å°±å®šä½åˆ°äº†æ˜¯translateçš„åˆ‡æ¢äºæ˜¯å°±å»çœ‹ä»–æ¯æ¬¡åˆ‡æ¢çš„è¿‡ç¨‹æ˜¯æ€æ ·ï¼Œç„¶åçœ‹çœ‹å½“å¼•èµ·åˆ‡æ¢çš„æ—¶å€™å»æ‰§è¡Œäº†å“ªäº›æµç¨‹ã€‚

äºæ˜¯æˆ‘ä¾¿å®šä½åˆ°äº†watchå½“ä¸­ç›‘å¬realIndexRefå˜æ¢æ‰§è¡Œçš„translateToåšçš„åˆ‡æ¢ï¼Œå¦‚ä¸‹ï¼š

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ee2868b728043bfab66caddcd097ceb~tplv-k3u1fbpfcp-watermark.image?)

å…¶å®åœ¨è¿™é‡Œåšäº†å¾ˆå¤šè¾“å‡ºï¼Œå¤§è‡´äº†è§£å†™æ¯ä¸ªå­—æ®µæ„ä¹‰ã€‚
#### è§£å†³
é‚£ä¹ˆæ—¢ç„¶åœ¨ä¸¤ä¸ªitemä¸‹ä¼šæœ‰é—®é¢˜ï¼Œåœ¨ä¹ˆä¸¤ä¸ªitemä¸‹ä¸èµ°loopè¿™æ®µé€»è¾‘å°±è¡Œäº†ï¼Œäºæ˜¯æˆ‘åŠ ä¸Šäº†è¿™æ ·çš„ä¸€æ®µä»£ç ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95f3bc6ad01f433dbbbc46d5c575384f~tplv-k3u1fbpfcp-watermark.image?)

ç„¶åæµ‹è¯•ï¼Œå‘ç°è§£å†³äº†ğŸ˜‚ ä¹‹åæˆ‘ä¾¿æäº¤äº†prç­‰å¾…å›åº”äº†ã€‚ ä¸ºäº†å¾—åˆ°æ›´å¥½çš„å»ºè®®ï¼Œæˆ‘åœ¨readmeä¸­çœ‹åˆ°äº†äº¤æµç¾¤ï¼Œäºæ˜¯ä¾¿åœ¨ç¾¤ä¸­ä¹Ÿæå‡ºäº†è¿™ä¸ªprï¼Œè¿™æ ·åº”è¯¥å¯ä»¥å¾—åˆ°ä½œè€…æ›´å¿«çš„å›å¤ã€‚


![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ba7e34adc6843c38b0b48268c11dd4e~tplv-k3u1fbpfcp-watermark.image?)

ä¹‹ååœ¨prå½“ä¸­æˆ‘ä¹Ÿå¾—åˆ°äº†ä½œè€…å¤§å¤§ä»¥åŠå…¶ä»–å¤§ä½¬çš„å»ºè®®ï¼Œæœ€åæ‰æ˜¯æˆ‘ä¸Šé¢ä¸€è¡Œä»£ç çš„å‘ˆç°ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27925ce4b9904a3c8e1ca3f154414f5b~tplv-k3u1fbpfcp-watermark.image?)

åŒæ—¶ä¸€äº›å…¶ä»–å¤§ä½¬ä¹Ÿç›´æ¥ç»™å‡ºäº†æ›´åŠ åˆç†çš„å†™æ³•æˆ‘ä¹Ÿæ˜¯ç›´æ¥å‚è€ƒäº†è¿™ä¸ªï¼Œè¿™ä¹Ÿæ˜¯ç»è¿‡åå¤ä¿®æ”¹æœ‰äº†ä¸Šè¿°çš„ä¸€è¡Œä»£ç ã€‚

> æœ€åæ„Ÿè°¢ä½œè€…å¤§å¤§ä»¥åŠç»™æˆ‘æå‡ºå»ºè®®çš„å¤§ä½¬ğŸ˜¹


[é¡¹ç›®issueåœ°å€](https://github.com/TuSimple/naive-ui/issues/3413)
